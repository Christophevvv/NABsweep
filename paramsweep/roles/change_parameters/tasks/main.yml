---
#Change parameters

- name: "Set {{current_param.group}}.{{current_param.name}} = {{param}} in model config"
  copy:
    content: "{{ modelparams | combine({'numenta':{ 'modelConfig':{ 'modelParams': { current_param.group: { current_param.name : param } } } } }, recursive=true) | to_json }}"
    dest: "{{ output_config_location }}"

- name: "run NAB for current parameter settings"
  command: "python run.py -d null,numenta -m config/paramsweep_detectorparams.json --skipConfirmation --windowsFile labels/combined_windows_twitter.json"
  args:
    chdir: "{{ NAB_location }}"


- name: "process NAB results"
  debug:
    msg: "processing results for param: {{ current_param.name }} = {{param}}"
